需求分析报告目录提纲

一、 选题背景

（一） 藏红花种植产业现状与面临的挑战

藏红花（Crocus sativus L.）被誉为“红色金子”，具有极高的药用价值和经济价值，是我国重点发展的名贵中药材之一。然而，藏红花对生长环境的要求极为苛刻，其全生长周期涵盖了球茎休眠期、花芽分化期、开花期和营养生长期等多个阶段，每个阶段对温度、湿度、光照强度及土壤水分都有着截然不同的精准需求。

传统的藏红花种植模式主要依赖人工经验进行管理。种植户需要频繁往返大棚或种植室内查看温度计和湿度计，并手动操作灌溉或补光设备。这种粗放式的管理方式存在显著弊端：一是人工监测存在滞后性和误差，难以捕捉环境参数的微小波动；二是缺乏即时响应机制，一旦环境突变（如温度骤降或土壤过干）未能及时发现，极易导致花期缩短、产量下降甚至球茎腐烂；三是无法实现规模化种植，高昂的人力成本限制了产业的进一步发展。因此，如何利用现代信息技术实现藏红花生长环境的精准监测与自动化控制，成为提升藏红花品质与产量的关键问题。

（二） 物联网技术在精细化农业中的应用需求

物联网（IoT）技术的引入为解决上述农业痛点提供了可行方案。通过部署各类传感器（如本项目采用的DHT11温湿度传感器、BH1750光照传感器、土壤湿度检测模块等 ），可以实现对种植环境数据的7x24小时全天候采集。

在藏红花培育系统中，物联网技术构建了物理世界与数字世界的桥梁。底层硬件（如STM32F411微控制器）作为感知执行层，能够实时读取传感器数据，并根据指令驱动水泵、LED补光灯带等执行器 。这种“感知-传输-执行”的闭环体系，使得种植管理从“凭经验”转向“看数据”，确保了藏红花始终处于最适宜的生长环境中，从而大幅降低种植门槛和风险。

（三） 引入边缘计算技术的必要性与研究意义

虽然传统的物联网架构通常将所有数据上传至云端处理，但在藏红花智能培育场景中，单纯依赖云端存在局限性。本项目引入**边缘计算（Edge Computing）**架构，以树莓派4B作为边缘服务器（Edge Server） ，主要基于以下三点考量：

    实时性与可靠性要求：农业自动化控制对网络延迟和稳定性敏感。如果在断网情况下，自动灌溉策略失效，可能对作物造成不可逆伤害。通过在边缘侧（树莓派）部署Flask应用和SQLite数据库 ，系统能够在本地独立运行自动灌溉算法（如检测到土壤湿度低于阈值即刻开启水泵），无需等待云端指令，确保了系统的鲁棒性。

视觉数据的高效处理：本项目集成了摄像头进行AI视觉分析（如识别花色判断生长阶段：花蕾期、盛开期等） 。图像视频数据量大，直接上传云端会消耗大量带宽且延迟高。利用边缘设备的算力在本地运行OpenCV算法进行预处理和分析，仅上传分析结果（如生长状态、颜色置信度），大大提升了系统效率。

    数据隐私与安全性：边缘计算将核心业务数据保留在本地局域网内，减少了数据在公共网络传输中的泄露风险，符合智慧农业对数据安全性的要求。

综上所述，设计并实现一套基于边缘计算的藏红花全生长周期智能培育系统，不仅能够解决传统种植中环境控制难、人力成本高的问题，更能通过边缘智能技术提升系统的响应速度与智能化水平，具有重要的应用价值和现实意义。

二、 业务需求

本系统旨在为藏红花种植户提供一套低成本、高可靠性的智能培育解决方案。根据客户（种植户及农业管理人员）的实际作业流程，系统需满足以下三大核心业务需求：

（一） 藏红花生长环境的全周期监测业务 藏红花对生长环境极其敏感，不同生长阶段（如花芽分化期需24-27℃，开花期需15-18℃）需要精准的环境参数支持。因此，核心业务首要解决的是“数据不可见”的问题。

    多维环境参数采集：系统必须能够实时采集影响藏红花生长的关键指标，包括空气温度、空气湿度、光照强度（Lux）以及土壤水分含量。这些数据需通过部署在底层的硬件节点（STM32微控制器）进行秒级读取 。

数据汇聚与实时展示：采集到的原始数据不能仅停留在传感器端，需通过串行通信实时传输至边缘服务器（树莓派）。客户要求在任何连入局域网的终端设备（如手机或PC浏览器）上，通过Web界面直观地查看到当前的最新环境数值，以便快速判断环境是否适宜 。

历史数据追溯：为了分析生长周期规律，系统需要具备数据持久化能力。业务要求系统能够自动记录长期的环境变化趋势，并提供可视化的历史数据图表（如温湿度曲线图），支持按时间段（如最近24小时、最近一周）查询，帮助用户复盘种植经验 。

（二） 基于环境数据的远程与自动化管理业务 传统种植依赖人工巡检和手动操作，效率低下且容易发生疏漏。本系统需通过数字化手段解决“执行不及时”和“管理繁琐”的问题。

    设备远程控制：客户需要解除物理空间的限制，通过Web管理平台即可远程开关种植现场的执行设备。具体业务包括：远程启动/关闭水泵进行灌溉、开启/熄灭LED补光灯带以调节光照、以及控制状态指示灯。系统需确保控制指令下发后的低延迟与执行状态反馈 。

智能自动化灌溉：针对藏红花对水分敏感的特性，业务要求系统具备“无人值守”的自动化管理能力。用户应能在后台配置灌溉策略（如设置土壤湿度阈值、单次浇水时长、最小冷却间隔）。当系统监测到土壤湿度低于设定下限（如30%）且满足时间间隔要求时，应自动触发水泵运行，无需人工干预，从而避免因人为疏忽导致的干旱缺水 。

（三） 智能化辅助种植业务 为了进一步降低种植门槛，提升用户体验，系统需引入智能化技术辅助日常管理。

    AI视觉生长监测：客户希望通过摄像头定期拍摄作物照片，并利用图像识别技术自动分析藏红花的生长状态。业务要求系统能识别花朵颜色（如红色、粉色、绿色），并据此判断当前处于花蕾期、盛开期还是凋谢期，为采摘或养护提供决策依据 。

非接触式交互控制：考虑到种植现场用户可能佩戴手套或手部沾染泥土，不便触摸屏幕，业务需求增加手势识别功能。用户在设备端通过简单的手势（如挥手、上下移动）即可切换屏幕显示页面或控制设备开关，提供更加便捷、卫生的现场交互方式 。

三、 用户需求

三、 用户需求

为确保藏红花智能培育系统的安全性与易用性，系统采用基于角色的访问控制（RBAC）模型。根据使用对象的职责不同，将用户划分为“普通用户”和“系统管理员”两类角色，不同角色拥有不同的操作权限和任务视图。

（一） 用户角色与权限体系 系统通过身份认证机制区分用户角色，并结合令牌（Token）技术保障操作安全。

    普通用户（Observer）：主要面向一线的种植与巡检人员。其核心任务是监控生长环境，确保无需登录即可快速查看实时状态，或通过基础账号登录查看历史数据，但不具备修改系统核心参数（如自动化策略）的权限。

    系统管理员（Administrator）：面向农业技术专家或设备维护人员。该角色拥有系统的最高权限，除了具备普通用户的所有功能外，还负责系统的高级配置、自动化策略制定以及用户管理。

    权限验证机制：系统设计了双重验证机制。一是基于账号密码登录生成的 Auth Token（身份令牌），用于维持会话状态；二是特权操作专用的 Admin Token（管理令牌），用于在紧急情况下或API直接调用时的快速鉴权。

（二） 普通用户（种植户）用例分析 普通用户的使用场景集中在数据的获取与基础状态的确认，主要任务如下：

    实时环境监控：

        任务描述：用户到达种植现场或通过远程终端，需即时获取当前的空气温湿度、光照强度及土壤湿度。

        用例细节：用户访问系统首页（index.html），系统自动从边缘服务器获取最新传感器数据并刷新显示。同时，用户可通过观察界面上的“手势状态”确认非接触交互模块是否正常工作。

    历史数据查询与趋势分析：

        任务描述：用户需要查看过去一段时间的环境变化，以判断是否符合藏红花当前生长阶段的需求。

        用例细节：用户进入“历史数据”页面（history.html），选择起始时间和结束时间，系统生成温湿度及土壤光照的双轴折线图。用户还可点击“导出CSV”按钮，将数据下载到本地进行归档。

    视觉生长状态确认：

        任务描述：用户需远程查看作物生长画面。

        用例细节：通过“AI视觉分析”功能，查看最近一次拍摄的作物照片及系统自动识别的生长阶段（如花蕾期、盛开期），确认作物健康状况。

（三） 系统管理员用例分析 管理员关注系统的控制逻辑与运行稳定性，涉及核心业务配置，主要任务如下：

    系统登录与鉴权：

        任务描述：管理员需进入后台管理界面进行敏感操作。

        用例细节：通过登录页面（login.html）输入用户名和密码。系统后端（auth/login 接口）验证哈希密码，验证通过后返回包含 admin 角色的加密 Token，前端将其存储并用于后续请求的请求头（Authorization Header）中。

    自动化灌溉策略配置：

        任务描述：根据藏红花不同生长周期的需水特性，调整自动灌溉的触发条件。

        用例细节：在后台管理页（admin.html）的“自动灌溉策略”面板中，管理员可设置“土壤湿度阈值”（如30%）、“单次浇水时长”（如10秒）和“最小冷却间隔”。提交修改时，系统会校验管理员权限（检查 Token 或 X-Admin-Token），确保只有授权人员才能修改核心算法参数。

    操作日志审计：

        任务描述：追溯设备的操作记录，排查异常灌溉或误操作行为。

        用例细节：管理员查看“最近控制日志”列表，系统展示所有设备控制指令的来源、执行时间、执行器对象（如水泵、灯带）及执行结果（成功/失败），确保所有自动化行为与人工操作均有据可查。

四、 功能需求

    对应规范要求： 产品必须实现的软件功能。 结合代码：这是最核心部分，依据您的 app.py, main.py, dht11.py 等代码逻辑构建。

（一） 端侧数据采集与处理功能 1、 多传感器数据采集（温湿度、光照、土壤湿度） 2、 非接触式手势识别控制交互（PAJ7620驱动） 3、 本地OLED屏幕状态显示与页面切换 （二） 边缘服务器（Edge Server）功能 1、 基于Flask的Web服务与RESTful API接口 2、 数据持久化存储与管理（SQLite数据库设计） 3、 历史数据可视化分析（Echarts图表展示） （三） 设备控制与自动化功能 1、 手动远程控制（水泵、补光灯、指示灯） 2、 智能自动化灌溉策略（基于阈值的自动决策） （四） AI视觉分析功能 1、 摄像头图像采集与存储 2、 基于OpenCV的生长周期与花色识别算法

五、 预期结果

    对应规范要求： 对选题最终效果进行阐述。

（一） 软硬件实物系统的构建指标 （二） 系统运行稳定性与响应速度预期 （三） 智能培育效果与人工成本降低预期

六、 可行性分析

    对应规范要求： 技术、经济、社会可行性。 结合代码：利用您已有的硬件列表和技术栈进行分析。

（一） 技术可行性分析 1、 硬件选型分析（STM32F411、树莓派4B、各类传感器） 2、 软件技术栈分析（MicroPython, Python Flask, OpenCV） 3、 开发与运行环境要求（Arch Linux/Raspberry Pi OS） （二） 经济可行性分析 1、 项目实施成本预算（元器件与开发板成本） 2、 投入产出比分析 （三） 社会可行性分析 1、 对现代农业发展的推动作用 2、 法律法规与安全性符合度

七、 参考文献

    对应规范要求： 不少于20篇，其中外文不少于5篇。

下一步建议

    直接开始写作：您可以新建一个Word文档，设置页面格式为：左边距3cm，其余2.5cm，二号宋体加粗居中写“需求分析报告”作为标题 。

    填充内容：

        第四部分（功能需求） 可以直接参考您的 fyp-repomix-output.xml 中的 app.py (API接口)、main.py (STM32逻辑) 和 admin.html (前端功能) 来写详细的文字描述。

        第六部分（可行性） 可以直接列出您代码文件中提到的硬件清单（如 STM32F411 Black Pill, Raspberry Pi 4B, DHT11, BH1750等）。

您需要我为您详细撰写其中哪一个具体章节的内容吗？
